/**
 * Copyright (c) 2016 hustcc
 * License: MIT
 * Version: v1.0.3
 * https://github.com/hustcc/xhr.js
 **/
!function(e,n){"object"==typeof module&&module.exports?(module.exports=n(e),module.exports["default"]=module.exports):e.XHR=n(e)}("undefined"!=typeof window?window:this,function(){var e=function(e){var n=function(e){var n,t={};return e.getAllResponseHeaders().replace(/^(.*?):\s*([\s\S]*?)$/gm,function(e,o,r){n=t[o],t[o]=n?n+","+r:r}),{status:e.status,statusText:e.statusText,url:e.responseURL,text:e.responseText,responseType:e.responseType,headers:t,ok:function(){return 1==(e.status/200|0)},json:function(){return JSON.parse(e.responseText)},xml:function(){return e.responseXML},blob:function(){return new Blob([e.response])}}},t="",o="",r={},u="",s=e!==!1,c={},i=new XMLHttpRequest,f=function(e){return null===e?"null":e!==Object(e)?typeof e:{}.toString.call(e).slice(8,-1).toLowerCase()},a=function(e,n){"ready-success-fail".split("-").indexOf(e)>=0&&"function"==f(n)&&(c[e]=n)},p=function(e){return c[e]?c[e]:function(){}},l=function(){if(4===i.readyState){var e=n(i);p("ready")(e,j),200===i.status?p("success")(e,j):p("fail")(e,j)}},d=function(e,n){r[e]=n},x=function(e){s=e},y=function(e){var n,t=encodeURIComponent,o=[];for(n in e)o.push(t(n)+"="+t(e[n]));return o.join("&")},b=function(e,n,r,s,c){return t=e,o=n,u=r,a("success",s),a("fail",c),T()},m=function(e,n,t,o){return n="object"==f(n)?y(n):"",n&&(e=e+"?"+n),b("GET",e,"",t,o)},w=function(e,n,t,o){var r=f(n),u="Content-Type",s="application/";return"object"==r?(n=y(n),d(u,s+"x-www-form-urlencoded")):"formdata"==r||d(u,s+"json"),b("POST",e,n,t,o)},T=function(){i.open(t,o,s);for(var e in r)i.setRequestHeader(e,r[e]);return i.onreadystatechange=l,i.send(u),j},j={url:function(){return o},body:function(){return u},on:a,setRequestHeader:d,setAsync:x,request:b,get:m,post:w,abort:i.abort,reset:function(){s=!0,o=u=t="",r=c={}}};return j};return e});